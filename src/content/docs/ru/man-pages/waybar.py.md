---
title: waybar.py
description: страница руководства waybar.py
---

## Название

`waybar.py` - Скрипт управления конфигурацией Waybar для HyDE

## Краткий обзор

```
waybar.py [-h] [--set SET] [-n] [-p] [-u] [-g] [-i] [-b] [-G] 
          [-c CONFIG] [-s STYLE] [-w] [--json] [--select] [--kill] 
          [--hide [{0,1,toggle}]]
```

## Описание

`waybar.py` это комплексный скрипт для управления конфигурацией Waybar, являющийся частью HyDE, вашей среды разработки.

Скрипт управляет конфигурациями Waybar, хранящимися в `~/.config/waybar/layouts/`, и соответствующими им стилями в `~/.config/waybar/styles/`. Он автоматически обрабатывает генерацию файлов-включений, изменение размеров иконок, обновление радиуса скругления границ и обеспечивает плавное переключение между различными конфигурациями Waybar.

## Опции

### Управление макетами

**`--set SET`**
: Установить определенный макет по имени. Файл макета должен существовать в `~/.config/waybar/layouts/` с расширением `.jsonc`.

**`-n, --next`**
: Переключиться на следующий доступный макет в алфавитном порядке. Перебирает все макеты в каталоге макетов.

**`-p, --prev`**
: Переключиться на предыдущий доступный макет в алфавитном порядке. Перебирает все макеты в каталоге макетов.

### Операции обновления

**`-u, --update`**
: Выполнить полное обновление всех компонентов Waybar, включая:
  -  Конфигурации размеров иконок в файлах JSON
  -  Радиус скругления границ в файлах CSS
  -  Генерация файла includes.json
  -  Синхронизация конфигурации и стиля

**`-g, --update-global-css`**
: Обновить только файл global.css. Этот файл содержит динамические конфигурации размера и семейства шрифтов, которые могут быть переопределены темами через `hypr.theme` >> `$BAR_FONT`.

**`-i, --update-icon-size`**
: Обновить конфигурации размеров иконок в файлах JSON. Это решает проблемы с размерами иконок, которые не могут быть обработаны напрямую через CSS Waybar.

**`-b, --update-border-radius`**
: Обновить конфигурации радиуса скругления границ в файлах CSS. Это создает динамический радиус скругления для групп, который адаптируется к настройкам скругления углов Hyprland.

**`-G, --generate-includes`**
: Сгенерировать файл `includes.json`. Этот файл содержит:
  -  Все модули из `~/.config/waybar/modules/`
  -  Динамические конфигурации, которые Waybar не предоставляет нативно
  -  Разрешения размеров иконок для правильного стиля

### Пути к конфигурациям

**`-c CONFIG, --config CONFIG`**
: Указать путь к исходному файлу `config.jsonc`. Это позволяет использовать конфигурации, находящиеся вне стандартного каталога макетов.

**`-s STYLE, --style STYLE`**
: Указать путь к исходному файлу `style.css`. Это позволяет использовать стили, находящиеся вне стандартного каталога стилей.

### Управление процессами

**`-w, --watch`**
: Включить режим наблюдения. Постоянно отслеживать Waybar и автоматически перезапускать его, если процесс завершается. Полезно для поддержания постоянного экземпляра Waybar.

**`--kill, -k`**
: Завершить все запущенные экземпляры Waybar и любые связанные с ними скрипты-наблюдатели. Это обеспечивает чистый способ завершения всех процессов Waybar.

**`--hide [{0,1,toggle}]`**
: Управлять видимостью Waybar:
  - `--hide 0` или `--hide show`: Показать Waybar
  - `--hide 1` или `--hide hide`: Скрыть Waybar
  - `--hide` или `--hide toggle`: Переключить текущее состояние видимости

### Информация и листинг

**`--json, -j`**
: Вывести список всех доступных макетов в формате JSON. Полезно для написания скриптов и интеграции с другими инструментами.

**`--select, -S`**
: Открыть интерактивное меню rofi для выбора и переключения между доступными макетами. Это предоставляет визуальный интерфейс для просмотра и выбора из всех конфигураций макетов в `~/.config/waybar/layouts/`.

**`-h, --help`**
: Показать справочное сообщение со всеми доступными опциями и выйти.

## Файлы

**`~/.config/waybar/`**
: Основной каталог конфигурации Waybar для пользовательских настроек

**`~/.config/waybar/layouts/`**
: Каталог, содержащий файлы конфигурации макетов Waybar (формат `.jsonc`)

**`~/.config/waybar/styles/`**
: Каталог, содержащий файлы стилей CSS, соответствующие макетам

**`~/.config/waybar/modules/`**
: Каталог, содержащий конфигурации отдельных модулей

**`~/.config/waybar/includes/`**
: Каталог, содержащий сгенерированные файлы-включения и динамические конфигурации

**`~/.config/waybar/includes/includes.json`**
: Автоматически сгенерированный файл, содержащий все определения модулей и динамические конфигурации

**`~/.config/waybar/config.jsonc`**
: Текущая активная конфигурация Waybar (временный файл, копия выбранного макета)

**`~/.config/waybar/style.css`**
: Текущий активный стиль Waybar (автоматически сгенерированный, импортирует несколько файлов CSS)

**`~/.local/share/waybar/`**
: Предоставленные HyDE конфигурации Waybar (только для чтения, не редактировать)

## Примеры

### Базовое управление макетами

Интерактивный выбор макета:
```bash
waybar.py --select       # Открывает селектор макетов rofi
```

Переключение на конкретный макет:
```bash
waybar.py --set khing
```

Переключение между макетами:
```bash
waybar.py --next     # Следующий макет
waybar.py --prev     # Предыдущий макет
```

### Обновление конфигураций

Обновить все конфигурации:
```bash
waybar.py --update
```

Обновить конкретные компоненты:
```bash
waybar.py --update-icon-size        # Обновить только размеры иконок
waybar.py --update-border-radius    # Обновить только радиус скругления границ
waybar.py --generate-includes       # Перегенерировать includes.json
```

### Управление процессами

Запустить Waybar в режиме наблюдения:
```bash
waybar.py --watch
```

Управление видимостью Waybar:
```bash
waybar.py --hide 1       # Скрыть Waybar
waybar.py --hide 0       # Показать Waybar
waybar.py --hide toggle  # Переключить видимость
```

Завершить все процессы `waybar.py`, что эффективно завершает режим `--watch`

```bash
waybar.py --kill
```

### Сбор информации

Интерактивный выбор макета:
```bash
waybar.py --select       # Открывает меню rofi для выбора макета
```

Вывести список доступных макетов:
```bash
waybar.py --json         # Формат JSON для скриптов
```

### Пользовательские пути к конфигурациям

Использовать пользовательские файлы конфигурации:
```bash
waybar.py --config /path/to/custom-config.jsonc --style /path/to/custom-style.css
```

## Процесс настройки

1. **Просмотрите и выберите макеты**: Используйте `waybar.py --select`, чтобы открыть интерактивное меню rofi и просмотреть доступные макеты.
2. **Создайте или скопируйте макет**: Начните с существующего макета из `~/.local/share/waybar/layouts/` или создайте новый в `~/.config/waybar/layouts/`.
3. **Сгенерируйте включения**: Запустите `waybar.py --generate-includes`, чтобы убедиться, что все модули доступны.
4. **Установите макет**: Используйте `waybar.py --set <layout-name>`, чтобы активировать вашу конфигурацию, или используйте интерактивный селектор с `waybar.py --select`.
5. **Обновите конфигурации**: Запустите `waybar.py --update` после внесения изменений, чтобы убедиться, что все компоненты синхронизированы.

## Интеграция с HyDE

`waybar.py` тесно интегрирован с экосистемой HyDE:

- **Интеграция с темами**: Автоматически адаптируется к текущим настройкам темы HyDE.
- **Динамическое оформление**: Обновляет радиус скругления границ на основе настроек скругления окон Hyprland.
- **Управление шрифтами**: Синхронизирует шрифты с конфигурациями тем HyDE.
- **Система модулей**: Управляет специфичными для HyDE модулями и конфигурациями Waybar.


## Примечания

- Всегда используйте `~/.config/waybar/` для пользовательских конфигураций, никогда не редактируйте файлы в `~/.local/share/waybar/`.
- Файл `includes.json` генерируется автоматически и не должен редактироваться вручную.
- Имена макетов соответствуют именам файлов без расширения `.jsonc`.
- Файлы стилей должны соответствовать именам макетов для автоматического сопоставления (например, `khing.jsonc` использует `khing.css`).



